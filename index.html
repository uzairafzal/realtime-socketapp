<!DOCTYPE html>
<html>
<head>
    <title>Online Multiplayer 3D Chess - Using ThreeJS & SocketIO</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>

<body><h1>Online Multiplayer 3D Chess - Using ThreeJS & SocketIO</h1>
<p id="eventData"></p>
<button onclick="connect()">Connect</button>
<button onclick="disconnect()">Disconnect</button>
<script>
    let socket;
    let isListeningAlready = false;

    function connect() {
        socket = io();
        isListeningAlready = true;
        appendEventData("Connection Successful");
        // Do not register listeners multiple times
        if (!isListeningAlready) {
            socket.on('someoneConnected', function (id) {
                // check if socket identifier is someone else's
                if (socket.id !== id) {
                    appendEventData("Someone else connected");
                    console.log("Someone else connected");
                }
            })
            socket.on('someoneDisconnected', function () {
                console.log("Someone disconnected");
                appendEventData("Someone disconnected");
            })
            socket.on('disconnect', function () {
                console.log("You have disconnected");
                appendEventData("You have disconnected");
            })
        }
    }

    function disconnect() {
        isListeningAlready = false;
        socket.disconnect();
    }

    function appendEventData(text) {
        $("#eventData").append(text + "</br>");
    }
</script>
</body>
</html>